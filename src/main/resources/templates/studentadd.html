<html>
     <head>
<link href="//netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css"/>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<style>
    .button, input, select, textarea
    {
        margin-bottom: 25;
    }
    .dataTables_filter{
        float:right;
    }
   .dataTables_paginate
   {
       float:right;
   }
   
   th{
     background-color:#31708f;
     color: white;
    padding: 1px 5px;
    font-weight: bold;
    margin-right:100px
}
 .select[multiple], select[size]
    {
        margin-top: 10px;
    }
      #geomap{
                margin-left: px;
    width: 99%;
    height: 400px;
}
.form-group input-group
{
    width: 50%;
}
  </style>
  <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css"/>
    </head>
 
<body>
    <div id="throbber" style="display:none; min-height:120px;"></div>
<div id="noty-holder"></div>
<div id="wrapper" >
    <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
          
            <a class="navbar-brand" href="http://www.exoham.com">
                 <img src="/images/exoham.png" alt="LOGO" width="130px" height="50px"/>
            </a>
        </div>
        <!-- Top Menu Items -->
        <ul class="nav navbar-right top-nav">
         <li style="margin-right:400px;" ><a href="#" id="load_me">Welcome </a></li>
                       
            <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown"><b class="fa fa-angle-down"></b></a>
                <ul class="dropdown-menu">
                    <li><a href="school_profile.jsp?sch_id"><i class="fa fa-fw fa-user"></i>Profile</a></li>
                    <li><a href="schooledit.jsp?sch_edit="><i class="fa fa-fw fa-cog"></i> Change Password</a></li>
                    <li class="divider"></li>
                    <li><a href="logout.jsp"><i class="fa fa-fw fa-power-off"></i> Logout</a></li>
                </ul>
            </li>
        </ul>
        <!-- Sidebar Menu Items - These collapse to the responsive navigation menu on small screens -->
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav side-nav">
                
                <li>
                    <a href="#" data-toggle="collapse" data-target="#submenu-1"><i class="fa fa-fw fa-graduation-cap"></i> Student <i class="fa fa-fw fa-angle-down pull-right"></i></a>
                    <ul id="submenu-1" class="collapse">
                        <li><a href="/student_add"><i class="fa fa-angle-double-right"></i> Student From <i class="fa fa-fw fa-angle-right pull-right"></i></a></li>
                        <li><a href="stud_view.jsp"><i class="fa fa-angle-double-right"></i> Student List <i class="fa fa-fw fa-angle-right pull-right"></i></a></li>
                      
                    </ul>
                </li>
                <li>
                    <a href="#" data-toggle="collapse" data-target="#submenu-2"><i class="fa fa-fw fa-angle-down pull-right"></i><i class="fa fa-fw fa-bus"></i> Bus</a>
                    <ul id="submenu-2" class="collapse">
                        <li><a href="bus_form.jsp"><i class="fa fa-angle-double-right"></i> Add Bus's</a></li>
                        <li><a href="bus_view.jsp"><i class="fa fa-angle-double-right"></i> View Bus</a></li>
                    </ul>
                </li>
                <li>
                   <a href="#" data-toggle="collapse" data-target="#submenu-3"><i class="fa fa-fw fa-angle-down pull-right"></i><i class="fa fa-road"></i> Stop</a>
                    <ul id="submenu-3" class="collapse">
                        <li><a href="add_stop.jsp"><i class="fa fa-angle-double-right"></i> Add Stop</a></li>
                        <li><a href="add_route.jsp"><i class="fa fa-angle-double-right"></i> Add Route</a></li>
                        <li><a href="ass_stop.jsp"><i class="fa fa-angle-double-right"></i> Assign Stop to Route</a></li>
                    </ul>
                </li>      
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </nav>
</div><!-- /#wrapper -->
    
  <div id="page-wrapper" >
             <li><a href="#"><span class="glyphicon glyphicon-home"></span>Home</a></li>
            <li><a href="#">School</a></li>

            <li class="active">School_form</li>
          
         <div class="container-fluid" >
                  <div style="margin-top:30px">
                <h3 style="margin-bottom:-17px;">Add Student</h3><hr style="border:1px solid skyblue;"/>
            </div>
                
              
			<form action="/studentInsert" method="POST" modelAttribute="StudentModelAttribute">
			
            <table class="table table-user-information" style="margin-left:50px;" >
            <tr>
                          <th> Roll Number :</th>
                          <td><input type="number" id="rollNumber" name="rollNumber" placeholder="Roll Number" required="true" class="form-control col-sm-4"/></td>
                           <th>Student Name:</th>
                           <td> <input type="text" name="studentName" placeholder="Student Name" required="true"  class="form-control col-sm-4"/></td>
                      </tr>
              <tr>
                          <th> Standard :</th>
                          <td><select name="Standard" required="true" class="form-control col-sm-4">
                            <option >Standard</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10">10</option>
                         </select>      
                       </td>
                           <th>Division:</th>
                           <td> <select name="Divison" required="true" class="form-control col-sm-4">
		                             	<option>Division</option>
		                             	<option value="A">A</option>
		                              	<option value="B">B</option>
		                             	<option value="C">C</option>
		                                <option value="A">D</option>
		                                <option value="B">E</option>
		                                <option value="C">F</option>
                          		</select>
                          </td>
                      </tr>
          
          			                  
                     <tr>
                          <th> Date Of Birth :</th>
                          <td><input type="date" name="DOB" required="true" class="form-control col-sm-4"/> </td>
                           <th> Gender :</th>
                           <td><input type="radio" name="Gender" value="Male" style="width:25px;" />Male <input type="radio" name="s_gender" value="Female" style="width:25px;" />Female</td>
                      </tr>
                   
                                  <tr>
                           <th>City:</th>
                           <td><input type="text" name="City" placeholder="City" required="true" class="form-control col-sm-4"/></td>
                      
      	                  <th> Pin Code :</th>
                          <td><input type="text" name="pinCode" placeholder="Pin Code" required="true" class="form-control col-sm-4"/></td>
                       </tr>
                      
 <tr>
                          <th> Mobile no : </th>
                          <td>
                          <input type="number" name="Contact" pattern="^\d{10}$" placeholder=" Mobile N" required="true" class="form-control col-sm-4"/></td>
                           <th>Email :</th>
                           <td>  <input type="email"  placeholder="Email" required="true" name="Email" pattern="[^@]+@[^@]+\.[a-zA-Z]{2,6}" class="form-control col-sm-4"/> </td>
                      </tr>
                      </table>
                      
        <button type="submit" value="submit" class="btn btn-primary" style="width:20%;margin-left: 50%; font-family: times new roman;font-size: 14px;align:center;">Add Student</button>  
        
</form>
  <div class="row " >
   <div class="col-md-12">
		<div class="panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title">Listing All Stoppage</h3>
				
				</div>
				<div class="panel-body">
					
					<script type="text/javascript">
					jQuery(document).ready(function($)
					{
						$("#example-1").dataTable({
							aLengthMenu: [
								[10, 25, 50, 100, -1], [10, 25, 50, 100, "All"]
							]
						});
					});
					</script>


		<div th:if="${not #lists.isEmpty(listStudent)}"  style="margin-left:12" class="table-responsive" data-pattern="priority-columns" data-focus-btn-icon="fa-asterisk" data-sticky-table-header="true" data-add-display-all-btn="true" data-add-focus-btn="true">
         
			<table id="example-1" class="table table-striped table-bordered" cellspacing="0" width="100%">
				  <thead>
				      <tr>
				        <th>Roll&nbsp;Number</th>
				        <th>Student&nbsp;Name</th>
				        <th>Standard</th>
				        <th>Divison</th>
				        <th>DOB</th>
				        <th>City</th>
				        <th>Email</th>
				        <th>Gender</th>
				        <th>Pin Code</th>
				        <th>Contact</th>
				        <th>Action</th>
				      </tr>
				  </thead>
<tr th:each="student : ${listStudent}">
<td th:text="${student.rollNumber}"></td>
<td th:text="${student.studentName}"></td>
<td th:text="${student.Standard}"></td>
<td th:text="${student.Divison}"></td>
<td th:text="${student.DOB}"></td>
<td th:text="${student.City}"></td>
<td th:text="${student.Email}"></td>
<td th:text="${student.Gender}"></td>
<td th:text="${student.pinCode}"></td>
<td th:text="${student.Contact}"></td>
<td>
    <div class="btn-group">
        <a href='mapEdit.jsp?stop_id==rs.getString("stop_id")%>'><button type="button" class="btn btn-default btn"><i class="glyphicon glyphicon-pencil"></i></button></a>
         <a href='/delete/${student.rollNumber}'><button type="button" class="btn btn-default btn" onclick="return confirm('Are you sure you want to Delete?')"><i class="glyphicon glyphicon-trash"></i></button></a>
  </div>   
</td>
</tr>
  </table>
				</div>
				</div>
			</div>

            </div>
            </div>
          </div>
</div>
    <script>
var geocoder;
var map;
var marker;

/*
 * Google Map with marker
 */
function initialize() {
    var im='https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png';;
    var initialLat = $('.search_latitude').val();
    var initialLong = $('.search_longitude').val();
    initialLat = initialLat?initialLat:18.504;
    initialLong = initialLong?initialLong:73.820;

    var latlng = new google.maps.LatLng(initialLat, initialLong);
    var options = {
        zoom: 16,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    map = new google.maps.Map(document.getElementById("geomap"), options);

    geocoder = new google.maps.Geocoder();

    marker = new google.maps.Marker({
        map: map,
        draggable: true,
        position: latlng,
        icon: im
//         icon: {
//			  url: "bus_loc.png",
//			  scaledSize: new google.maps.Size(70, 70),
//			  origin: new google.maps.Point(0, 0),
//			  anchor: new google.maps.Point(33,65),
//			  labelOrigin: new google.maps.Point(40,33)
//			}, 
			
    });

    google.maps.event.addListener(marker, "dragend", function () {
        var point = marker.getPosition();
        map.panTo(point);
        geocoder.geocode({'latLng': marker.getPosition()}, function (results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                map.setCenter(results[0].geometry.location);
                marker.setPosition(results[0].geometry.location);
                $('.search_addr').val(results[0].formatted_address);
                $('.search_latitude').val(marker.getPosition().lat());
                $('.search_longitude').val(marker.getPosition().lng());
            }
        });
    });

}

$(document).ready(function () {
    //load google map
    initialize();
    
    /*
     * autocomplete location search
     */
    var PostCodeid = '#search_location';
    $(function () {
        $(PostCodeid).autocomplete({
            source: function (request, response) {
                geocoder.geocode({
                    'address': request.term
                }, function (results, status) {
                    response($.map(results, function (item) {
                        return {
                            label: item.formatted_address,
                            value: item.formatted_address,
                            lat: item.geometry.location.lat(),
                            lon: item.geometry.location.lng()
                        };
                    }));
                });
            },
            select: function (event, ui) {
                $('.search_addr').val(ui.item.value);
                $('.search_latitude').val(ui.item.lat);
                $('.search_longitude').val(ui.item.lon);
                var latlng = new google.maps.LatLng(ui.item.lat, ui.item.lon);
                marker.setPosition(latlng);
                initialize();
            }
        });
    });
    
    /*
     * Point location on google map
     */
    $('.get_map').click(function (e) {
        var address = $(PostCodeid).val();
        geocoder.geocode({'address': address}, function (results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                map.setCenter(results[0].geometry.location);
                marker.setPosition(results[0].geometry.location);
                $('.search_addr').val(results[0].formatted_address);
                $('.search_latitude').val(marker.getPosition().lat());
                $('.search_longitude').val(marker.getPosition().lng());
            } else {
                alert("Geocode was not successful for the following reason: " + status);
            }
        });
        e.preventDefault();
    });

    //Add listener to marker for reverse geocoding
    google.maps.event.addListener(marker, 'drag', function () {
        geocoder.geocode({'latLng': marker.getPosition()}, function (results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                if (results[0]) {
                    $('.search_addr').val(results[0].formatted_address);
                    $('.search_latitude').val(marker.getPosition().lat());
                    $('.search_longitude').val(marker.getPosition().lng());
                }
            }
        });
    });
});
</script>

    </body>
    
 </html>